# Magnetic Anomaly Simulator

This project simulates a magnetic anomaly (e.g., a buried dipole) and a sensor's flight path to collect magnetic field data. It then provides a script to visualize this data.

## Project Structure

-   `mag_sim_v1.py`: The main simulation script. It defines a 3D space, a magnetic dipole, a flight path, calculates magnetic field readings, and saves them to a CSV file.
-   `plot_mag_data.py`: A script to read the data generated by `mag_sim_v1.py` and create a 2D color map of the magnetic field strength.
-   `magnetic_readings.csv`: The output data file generated by `mag_sim_v1.py`. (This file will be created after running the simulation).
-   `magnetic_field_map.png`: The output plot generated by `plot_mag_data.py`. (This file will be created after running the plotting script).

## Prerequisites

-   Python 3.x
-   NumPy: `pip install numpy`
-   Pandas: `pip install pandas`
-   Matplotlib: `pip install matplotlib`

You can install all dependencies at once using:
`pip install numpy pandas matplotlib`

## How to Run

1.  **Run the Simulation:**
    Execute the `mag_sim_v1.py` script to generate the magnetic field data.
    ```bash
    python mag_sim_v1.py
    ```
    This will create a file named `magnetic_readings.csv` in the same directory.
    The simulation parameters (e.g., dipole position, strength, flight path) can be adjusted directly within the `mag_sim_v1.py` script.

2.  **Plot the Data:**
    After the simulation has generated `magnetic_readings.csv`, run the `plot_mag_data.py` script to visualize the data.
    ```bash
    python plot_mag_data.py
    ```
    This will create an image file named `magnetic_field_map.png` showing a plot of the magnetic field strength along the sensor's flight path.

## Customization

-   **Dipole Parameters:** Open `mag_sim_v1.py` and modify the following variables at the top of the script to change the ground truth anomaly:
    -   `DIPOLE_POSITION`: Coordinates (x, y, z) of the dipole in meters.
    -   `DIPOLE_MOMENT_STRENGTH`: Strength of the dipole in A*m^2.
    -   `DIPOLE_ORIENTATION_THETA`: Inclination angle from the Z-axis in radians.
    -   `DIPOLE_ORIENTATION_PHI`: Azimuthal angle from the X-axis in the XY-plane in radians.
-   **Flight Path:** In `mag_sim_v1.py`, you can change:
    -   `FLIGHT_ALTITUDE`: Altitude of the flight path in meters.
    -   `FLIGHT_START_X`, `FLIGHT_END_X`: Start and end X-coordinates for the flight.
    -   `FLIGHT_Y_POSITION`: The Y-coordinate for the straight flight line.
    -   `SAMPLING_INTERVAL`: Distance between sensor readings in meters.
-   **3D Space:**
    -   `SPACE_DIMS`: Dimensions (x, y, z) of the simulation volume in meters.

## Output

-   `magnetic_readings.csv`: A CSV file containing the sensor position (x, y, z) and the corresponding 3-axis magnetic field vector (Bx, By, Bz) and total field strength (B_total_strength) at each point along the flight path.
-   `magnetic_field_map.png`: A PNG image showing a plot. For the current linear flight path, it's a line graph where the x-axis is the position along the flight path and the y-axis (or color) represents the total magnetic field strength. If the flight path were a 2D grid, this would be a 2D heatmap.
